<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'none'; font-src ${cspSource}; style-src 'nonce-${nonce}'; style-src-attr 'unsafe-inline'; script-src 'nonce-${nonce}' 'unsafe-eval';"
    />
    <link rel="stylesheet" type="text/css" nonce="${nonce}" href="${path('main.css')}" />
  </head>
  <body>
    <main class="container webview-form">
      <div class="form-header">
        <h1
          class="heading"
          data-text="this.spec() ? 'Edit connection details' : 'Create a new connection'"
        ></h1>
        <p class="form-description">
          Connect directly to a Kafka Cluster, Schema Registry or both. You may close this tab to
          cancel all changes.
        </p>
      </div>
      <form class="form-container" data-on-submit="this.handleSubmit(event)">
        <div class="form-section">
          <h2 class="section-heading">General</h2>
          <div class="input-container">
            <label for="name" class="label">Connection Name</label>
            <input
              class="input"
              id="name"
              name="name"
              type="text"
              placeholder="New Connection"
              data-attr-value="this.name()"
              data-on-change="this.updateValue(event)"
            />
            <span class="field-description"
              >An easy to remember name to reference this connection in the future</span
            >
          </div>
          <div class="input-container">
            <label class="label">Connection Type</label>
            <select
              class="input dropdown"
              id="platform"
              name="platform"
              value="this.platformType()"
              data-on-change="this.updateValue(event)"
            >
              <option value="apache-kafka">Apache KafkaÂ®</option>
              <option value="confluent-cloud">Confluent Cloud</option>
              <option value="confluent-platform">Confluent Platform</option>
              <option value="other">Other</option>
            </select>
            <!-- <template data-if="this.platformType() === 'Other'"
              >&nbsp;&nbsp;
              <input
                class="input"
                id="other"
                name="other-platform"
                type="text"
                data-attr-value="this.otherPlatformType()"
                data-attr-required="this.platformType() === 'Other' ? true : false"
                data-on-change="this.updateValue(event)"
              />
            </template> -->
          </div>
        </div>
        <div class="form-section">
          <template data-if="this.kafkaStatusMessage()"
            ><div class="status-banner">
              <span class="status-icon">x</span>
              <span
                data-attr-class="this.kafkaErrorMessage() ? 'info error' : 'info'"
                data-text="this.kafkaStatusMessage()"
              ></span>
            </div>
            ></template
          >
          <h2 class="section-heading">Kafka Cluster</h2>
          <div class="input-container">
            <label for="bootstrap_servers" class="label">Bootstrap Server(s)</label>
            <input
              class="input"
              id="bootstrap_servers"
              name="bootstrap_servers"
              type="text"
              placeholder="host:port, host2:port2"
              data-attr-value="this.kafkaBootstrapServers()"
              data-on-change="this.updateValue(event)"
            />
            <span class="field-description"
              >One or more host:port pairs to use for establishing the initial connection (use a
              comma-separated list for more than one server)</span
            >
          </div>
          <div class="input-container">
            <label for="kafka_auth_type" class="label">Authentication Type</label>
            <select
              class="input dropdown"
              id="kafka_auth_type"
              name="kafka_auth_type"
              data-on-change="this.updateValue(event)"
              data-attr-value="this.kafkaAuthType()"
              data-attr-disabled="this.platformType() === 'Confluent Cloud' ? true : false"
            >
              <option value="None">None</option>
              <option value="Basic">Username & Password</option>
              <option value="API">API Credentials</option>
            </select>
          </div>
          <template data-if="this.kafkaAuthType() === 'Basic'">
            <div class="input-row">
              <div class="input-container">
                <label for="kafka_username" class="label">Username</label>
                <input
                  class="input"
                  id="kafka_username"
                  name="kafka_username"
                  type="text"
                  data-attr-value="this.kafkaUsername()"
                  data-on-change="this.updateValue(event)"
                  required
                />
              </div>
              <div class="input-container">
                <label for="kafka_password" class="label">Password</label>
                <input
                  class="input"
                  id="kafka_password"
                  name="kafka_password"
                  type="password"
                  data-attr-value="this.kafkaSecret()"
                  required
                />
              </div>
            </div>
          </template>
          <template data-if="this.kafkaAuthType() === 'API'">
            <div class="input-row">
              <div class="input-container">
                <label for="kafka_api_key" class="label">API Key</label>
                <input
                  class="input"
                  id="api_key"
                  name="kafka_api_key"
                  type="text"
                  data-attr-required="this.kafkaBootstrapServers() !== ''"
                  data-attr-value="this.kafkaApiKey()"
                  data-on-change="this.updateValue(event)"
                />
              </div>
              <div class="input-container">
                <label for="kafka_api_secret" class="label">API Secret</label>
                <input
                  class="input"
                  id="api_secret"
                  name="kafka_api_secret"
                  data-attr-value="this.kafkaSecret()"
                  type="password"
                  data-attr-required="this.kafkaBootstrapServers() !== ''"
                />
              </div>
            </div>
          </template>
          <div class="toggle-container">
            <input
              type="checkbox"
              id="kafka_ssl"
              name="kafka_ssl"
              data-attr-title="this.platformType() === 'Confluent Cloud' ? 'SSL is required for Confluent Cloud' : 'Enable SSL for the cluster?'"
              data-attr-checked="this.kafkaSslEnabled() ? true : false"
              data-on-change="this.updateValue(event)"
              data-attr-disabled="this.platformType() === 'Confluent Cloud' ? true : false"
            />
            <label class="label" for="kafka_ssl">SSL enabled</label>
          </div>
        </div>
        <div class="form-section">
          <template data-if="this.schemaStatusMessage()"
            ><p
              data-attr-class="this.schemaErrorMessage() ? 'info error' : 'info'"
              data-text="this.schemaStatusMessage()"
            ></p
          ></template>
          <h2 class="section-heading">Schema Registry</h2>
          <div class="input-container">
            <label for="uri" class="label">URL</label>
            <input
              class="input"
              id="uri"
              name="uri"
              type="url"
              pattern="https?://.*"
              title="URL must begin with http or https"
              placeholder="https://example.com"
              data-attr-value="this.schemaUri()"
              data-on-change="this.updateValue(event)"
            />
            <span class="field-description"
              >The URL of the Schema Registry to use for serialization</span
            >
          </div>
          <div class="input-container">
            <label for="schema_auth_type" class="label">Authentication Type</label>
            <select
              class="input dropdown"
              id="schema_auth_type"
              name="schema_auth_type"
              data-on-change="this.updateValue(event)"
              data-attr-value="this.schemaAuthType()"
              data-attr-disabled="this.platformType() === 'Confluent Cloud' ? true : false"
            >
              <option value="None">None</option>
              <option value="Basic">Username & Password</option>
              <option value="API">API Credentials</option>
            </select>
          </div>
          <template data-if="this.schemaAuthType() === 'Basic'">
            <div class="input-row">
              <div class="input-container">
                <label for="schema_username" class="label">Username</label>
                <input
                  class="input"
                  id="schema_username"
                  name="schema_username"
                  type="text"
                  data-attr-value="this.schemaUsername()"
                  data-attr-required="this.schemaUri() !== ''"
                  data-on-change="this.updateValue(event)"
                />
              </div>
              <div class="input-container">
                <label for="schema_password" class="label">Password</label>
                <input
                  class="input"
                  id="schema_password"
                  name="schema_password"
                  type="password"
                  data-attr-required="this.schemaUri() !== ''"
                  data-attr-value="this.schemaSecret()"
                />
              </div>
            </div>
          </template>
          <template data-if="this.schemaAuthType() === 'API'">
            <div class="input-row">
              <div class="input-container">
                <label for="schema_api_key" class="label">API Key</label>
                <input
                  class="input"
                  id="schema_api_key"
                  name="schema_api_key"
                  type="text"
                  data-attr-required="this.schemaUri() !== ''"
                  data-attr-value="this.schemaApiKey()"
                  data-on-change="this.updateValue(event)"
                />
              </div>
              <div class="input-container">
                <label for="schema_api_secret" class="label">API Secret</label>
                <input
                  class="input"
                  id="schema_api_secret"
                  name="schema_api_secret"
                  type="password"
                  data-attr-required="this.schemaUri() !== ''"
                  data-attr-value="this.schemaSecret()"
                />
              </div>
            </div>
          </template>
          <div class="toggle-container">
            <input
              type="checkbox"
              id="schema_ssl"
              name="schema_ssl"
              data-attr-title="this.platformType() === 'Confluent Cloud' ? 'SSL is required for Confluent Cloud' : 'Enable SSL for the registry?'"
              data-attr-checked="this.schemaSslEnabled() ? true : false"
              data-on-change="this.updateValue(event)"
              data-attr-disabled="this.platformType() === 'Confluent Cloud' ? true : false"
            />
            <label class="label" for="schema_ssl">SSL enabled</label>
          </div>
        </div>
        <div class="form-section button-group">
          <div>
            <input
              class="button secondary"
              type="submit"
              data-attr-value="this.loading() ? 'Testing...' : 'Test'"
              data-attr-disabled="this.loading()"
            />
            <div
              data-attr-class="this.success() ? 'info' : 'info error'"
              data-text="this.message()"
            ></div>
          </div>
          <input
            class="button"
            type="submit"
            data-attr-value="this.spec() ? 'Update' : 'Save'"
            data-attr-disabled="this.loading()"
          />
        </div>
      </form>
    </main>
    <script type="module" nonce="${nonce}" src="${path('main.js')}"></script>
    <script type="module" nonce="${nonce}" src="${path('direct-connect-form.js')}"></script>
    <style nonce="${nonce}">
      body {
        max-width: 1000px;
        font-size: 14px;
        padding: 60px 80px;
      }
    </style>
  </body>
</html>
