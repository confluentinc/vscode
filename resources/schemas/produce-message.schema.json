{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "produce-message.schema.json",
  "title": "Produce Message",
  "description": "Schema for producing messages to a Kafka topic",
  "oneOf": [
    { "$ref": "#/definitions/produceMessage" },
    {
      "type": "array",
      "items": { "$ref": "#/definitions/produceMessage" }
    }
  ],
  "definitions": {
    "produceMessage": {
      "type": "object",
      "properties": {
        "key": {
          "type": "string",
          "description": "The key of the message"
        },
        "value": {
          "type": "string",
          "description": "The value of the message"
        },
        "headers": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "key": {
                "type": "string",
                "description": "The key of the header"
              },
              "value": {
                "type": "string",
                "description": "The value of the header"
              }
            },
            "required": ["key", "value"]
          }
        }
      },
      "required": ["key", "value"]
    }
  }

}
